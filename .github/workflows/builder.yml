name: Builder
on: [push]
run-name: Build ðŸš€
jobs:
  build-frpc-amd64:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Launch Builder
        run: |
          docker login --username=${{ secrets.ALIYUN_USERNAME }} --password=${{ secrets.ALIYUN_PASSWORD }} registry.cn-hangzhou.aliyuncs.com
          /bin/bash build.sh frpc frpc-auto 0.28.2
  build-frpc-armd64:
    runs-on: [self-hosted,ARM64]
    steps:
      - uses: actions/checkout@v2
      - name: Launch Builder
        run: |
          docker login --username=${{ secrets.ALIYUN_USERNAME }} --password=${{ secrets.ALIYUN_PASSWORD }} registry.cn-hangzhou.aliyuncs.com
          /bin/bash build.sh frpc frpc-auto-arm 0.28.2
  build-actions-runner-amd64:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Launch Builder
        run: |
          docker login --username=${{ secrets.ALIYUN_USERNAME }} --password=${{ secrets.ALIYUN_PASSWORD }} registry.ap-northeast-1.aliyuncs.com
          /bin/bash build.sh github-runner github-runner 2.304.0
  build-actions-runner-armd64:
    runs-on: [self-hosted,ARM64]
    steps:
      - uses: actions/checkout@v2
      - name: Launch Builder
        run: |
          docker login --username=${{ secrets.ALIYUN_USERNAME }} --password=${{ secrets.ALIYUN_PASSWORD }} registry.ap-northeast-1.aliyuncs.com
          /bin/bash build.sh github-runner github-runner-arm64 2.304.0
  build-consul-deregister-amd64:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Launch Builder
        run: |
          docker login --username=${{ secrets.ALIYUN_USERNAME }} --password=${{ secrets.ALIYUN_PASSWORD }} registry.cn-hangzhou.aliyuncs.com
          /bin/bash build.sh consul-deregister consul-deregister 1.0.0-SNAPSHOT