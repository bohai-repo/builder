name: Builder
on: [push]
run-name: ${{ github.actor }} Submitted Build ðŸš€
jobs:
  build_frpc_amd64:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        goos: [linux]
        goarch: [amd64]
    steps:
      - uses: actions/checkout@v2
      - name: Launch Builder
        run: |
          docker login --username=${{ secrets.ALIYUN_USERNAME }} --password=${{ secrets.ALIYUN_PASSWORD }} registry.cn-hangzhou.aliyuncs.com
          /bin/bash build.sh frpc frpc-auto 0.28.2
  build_frpc_arm64:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
          - arch: aarch64
            distro: bullseye
    steps:
      - uses: actions/checkout@v2
      - name: Launch Builder
        with:
          arch: ${{ matrix.arch }}
          distro: ${{ matrix.distro }}
        run: |
          docker login --username=${{ secrets.ALIYUN_USERNAME }} --password=${{ secrets.ALIYUN_PASSWORD }} registry.cn-hangzhou.aliyuncs.com
          /bin/bash build.sh frpc frpc-auto-arm64 0.28.2